## 1. Технологический Стек

Выбор технологий обусловлен требованиями к надежности (Reliability) и скорости разработки (Time-to-Market).

| Компонент | Технология | Обоснование |
| :--- | :--- | :--- |
| **Язык** | Python 3.10+ | Стандарт индустрии для алготрейдинга. |
| **API Клиент** | `ccxt` | Проверенная библиотека-обертка. Унифицирует методы API, берет на себя подпись запросов (HMAC SHA256) и обработку типов данных. |
| **Конфигурация** | `python-dotenv` | Следование принципам "The Twelve-Factor App" (хранение конфига в среде). |
| **CLI** | `argparse` | Нативный, надежный парсер аргументов командной строки. Не требует внешних зависимостей. |

---

## 2. Архитектура Решения

Проект построен по модульному принципу для легкости поддержки.

### 2.1. Структура Файлов
```text
MEXC-TRADE-BOT/
├── bot.py             # Точка входа (Entry Point). Обработка аргументов CLI.
├── mexc_client.py     # Класс-обертка над CCXT. Бизнес-логика.
├── .env               # Секреты (в .gitignore).
├── requirements.txt   # Зависимости.
└── docs/              # Документация.

2.2. Класс MEXCClient (mexc_client.py)

Центральный класс, инкапсулирующий логику взаимодействия с биржей.
Методы:
__init__: Инициализация ccxt.mexc с опцией {'options': {'defaultType': 'swap'}} для работы с деривативами (фьючерсами).
_retry_request(func, *args): Приватный метод-декоратор. Реализует паттерн Retry.
Алгоритм: 3 попытки -> Задержка 2 сек -> Если ошибка NetworkError или ExchangeNotAvailable, повтор.
open_order(side, symbol, amount): Создает рыночный ордер.
long -> create_market_buy_order
short -> create_market_sell_order
close_position(symbol):
Получает текущую позицию через fetch_positions.
Определяет размер открытой позиции.
Создает обратный ордер на полный объем для закрытия.

2.3. CLI Интерфейс (bot.py)
Использует argparse для маршрутизации команд.
Валидирует наличие обязательных аргументов для конкретных действий (например, для long обязательно нужен amount, для balance — нет).

3. Поток Данных (Data Flow)
User Input: Пользователь вводит команду в терминал.
Validation: bot.py проверяет аргументы.
Auth: MEXCClient загружает ключи из .env.
Request: Запрос отправляется на API MEXC.
Smart Retry Layer:
Успех: Возврат JSON с ID ордера.
Сбой: Пауза, повторная отправка.
Критический сбой: Вывод читаемой ошибки (Exception).
Output: Печать результата в stdout (Консоль).

4. Масштабирование (Future Roadmap)
Текущая архитектура позволяет легко добавить следующий функционал без переписывания ядра:
Лимитные ордера: Добавление аргумента --price.
Stop-Loss / Take-Profit: Использование параметров params в методе create_order библиотеки ccxt.
Web-интерфейс: Класс MEXCClient можно импортировать во Flask/FastAPI приложение.